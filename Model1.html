<!DOCTYPE html>
<html>
<head>
  <title>Summer CAM WDD Using AI</title>
  <!-- Include Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <style>
    main div {
      border: 1px solid black;
      padding: 10px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="jumbotron text-center">
    <h1 class="display-4">Summer CAM WDD Using AI</h1>
  </div>

  <main class="container">
    <!-- Add content inside div1 -->
    <div id="div1">
      <h2>Section 1. What is a linear regression?</h2>
      <ul>
        <li>It tries to find a linear function y=wx+b.</li>
        <li>The linear function tries to fit a collection of number pairs, such as house sales, (sqft, sale price).</li>
        <li>There is no linear function that can accurately fit all number pairs. So, we have to find the 'best' one.</li>
        <li>By being best, we design a so-called cost function, such as mean square error invented by the great Carl Gauss.</li>
        <li>This is what machine learning is doing.
            <br><img src="linearRegression1.jpg" width="400" height="300" alt="Linear Regression Image"></li>
      </ul>
    </div>  

            <!-- Add content inside div2 -->
            <div id="div2">
              <h2>Section 2. The JavaScript libraries to use</h2>
              <p>We will use TensorFlow.js to train the model.</p>
              <p>Click the 'Run' button below to import two JavaScript libraries.</p>
            </div>
      
            <!-- Add content inside div3 -->
      <div id="div3">
        <p>Import <a href="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js">https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js</a> for defining and training models.</p>
        <p>Import <a href="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.0.2/dist/tfjs-vis.umd.min.js">https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.0.2/dist/tfjs-vis.umd.min.js</a> for web browser visualization.</p>
        <button onclick="loadLibraries()">Run</button>
    </div>

        <!-- Add content inside div4 -->
    <div id="div4"></div>

    <!-- Add content inside div5 -->
    <div id="div5">
        <h2>Section 3. Using the dataset from Google</h2>
        <p>We will use a dataset from Google, <a href="https://storage.googleapis.com/tfjs-tutorials/carsData.json">https://storage.googleapis.com/tfjs-tutorials/carsData.json</a>.</p>
        <button onclick="loadDataset()">Load the dataset</button>
      </div>

        <!-- Add content inside div6 -->
    <div id="div6"></div>

    
        <!-- Add content inside div7 -->
        <div id="div7">
            <h2>Section 4. Extract the Miles_per_Gallon and Horsepower</h2>
            <p>We will use only Miles_per_Gallon:value and Horsepower: value for our training.</p>
            <button onclick="extractData()">Extract training dataset</button>
          </div>
      

    <!-- Add content inside div8 -->
    <div id="div8"></div>

    <!-- Add content inside div8 -->
    <div id="div9">
        <h2>Section 5. Visualize the training dataset</h2>
        <button onclick="visualizeDataset()">Visualize the training dataset</button>
    </div>

    <!-- Add content inside div10 -->
    <div id="div10">
        <h2>Section 6. Define the model</h2>
        <p>We will define a TensorFlow sequential model with one input x and one output y.</p>
    </div>
    <div id="div11"></div>
    <div id="div12"></div>
    <div id="div13"></div>
    <div id="div14"></div>
    <div id="div15"></div>
    <div id="div16"></div>
    <div id="div17"></div>
    <div id="div18"></div>
    <div id="div19"></div>
    <div id="div20"></div>
    </ul>
    </div>
  </main>

  <!-- Include Bootstrap JavaScript -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

   <script>
    var dataset; // Global variable to store the dataset
    var extractedData; // Global variable to store the extracted dataset
    var model; // Global variable to store the TensorFlow model

    function loadLibraries() {
      var script1 = document.createElement('script');
      script1.src = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js';
      document.head.appendChild(script1);

      var script2 = document.createElement('script');
      script2.src = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.0.2/dist/tfjs-vis.umd.min.js';
      document.head.appendChild(script2);

      var consoleOutput = document.getElementById('div4');
      consoleOutput.innerHTML = 'Libraries loaded successfully.';
    }

    function loadDataset() {
      fetch('https://storage.googleapis.com/tfjs-tutorials/carsData.json')
        .then(response => response.json())
        .then(data => {
          dataset = data; // Save the dataset to the global variable
          var consoleOutput = document.getElementById('div6');
          var firstTenData = JSON.stringify(data.slice(0, 10)); // Get the first 10 data values
          consoleOutput.innerHTML = firstTenData;
        })
        .catch(error => {
          var consoleOutput = document.getElementById('div6');
          consoleOutput.innerHTML = 'Error loading dataset: ' + error;
        });
    }

    function extractData() {
      if (dataset) {
        extractedData = dataset.map(item => {
          return {
            Miles_per_Gallon: item.Miles_per_Gallon,
            Horsepower: item.Horsepower
          };
        });

        var consoleOutput = document.getElementById('div8');
        var firstTenData = JSON.stringify(extractedData.slice(0, 10)); // Get the first 10 data values of the extracted dataset
        consoleOutput.innerHTML = firstTenData;
      } else {
        var consoleOutput = document.getElementById('div8');
        consoleOutput.innerHTML = 'Dataset not loaded yet.';
      }
    }

    function visualizeDataset() {
      if (extractedData) {
        const data = extractedData.map(item => ({
          x: item.Horsepower,
          y: item.Miles_per_Gallon
        }));

        const surface = { name: 'Horsepower vs Miles_per_Gallon', tab: 'Charts' };
        tfvis.render.scatterplot(surface, { values: data }, {
          xLabel: 'Horsepower',
          yLabel: 'Miles_per_Gallon',
          xMin: 0,
          xMax: 240,
          yMin: 0,
          yMax: 50,
          xAxisTickCount: 13,
          yAxisTickCount: 6
        });
      } else {
        var consoleOutput = document.getElementById('div8');
        consoleOutput.innerHTML = 'Dataset not extracted yet.';
      }
    }

    function defineModel() {
      model = tf.sequential();
      model.add(tf.layers.dense({ inputShape: [1], units: 1 }));
      model.add(tf.layers.dense({ units: 1 }));

      var consoleOutput = document.getElementById('div9');
      consoleOutput.innerHTML += '<p>Model defined successfully.</p>';
    }
  </script>
</body>
</html>